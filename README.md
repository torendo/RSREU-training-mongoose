# Лабораторая работа №4.
## Взаимодействие с базой данных по средствам объекной модели доступа
В этой лабораторной работе мы напишем объектную модель для коллекций базы MongoDB, что позволит удобно и понятно создавать документы коллекций, а также иметь строгое описание хранимых сущностей.

## 1. Подготовка окружения
Установим __Mongoosejs__ в наше приложение.

__Mongoosejs__ - это ORM-модуль для MongoDB, позволяющий вам использовать объектные модели в своем приложении для работы с данными.

В первой части лабораторной работы необходимо подключить модуль __Mongoosejs__ к нашему приложению и с помощью него подключиться к базе данных.

1.1 Подключение модуля

Подключение __Mongoosejs__ аналогично подключению модуля __mongodb__, с которым вы работали в лабораторной работе №3. Нужно выполнить следующую последовательность действий:

1. С помощью _npm install_ установить пакет [mongoose](https://www.npmjs.com/package/mongoose) и добавьте его в зависимости в package.json.
2. Закомментируйте все строки в файле _db\index.js_ (там, где мы описывали методы для подключения к базе данных).
3. В файле _db\index.js_ с помощью CommonJS импортируйте объект mongoose (аналогично тому, как мы импортировали _MongoClient_ в предыдущей лаборатоной работе).
4. Создайте метод _connect_ и экспортируйте его:

```javascript
module.exports = {
  connect(url) {
    return mongoose.connect(url, {
      useMongoClient: true,
    })
    .then(db => (_db = db))
    .catch(err => Promise.reject(err));
  }
};
```

5. Создайте методы _getInstance_ и _getCollection_, аналогичные созданным ранее в лабораторной работе №3.
6. Запустите приложение. Убедитесь, что все работает так, как работало в результате выполнения лабораторной работы №3.

## Схемы, типы, модели
Всё в Mongoose начинается описания схемы. Каждая схема по своей сути привязывается к MongoDB коллекции и описывает модель хранимых в ней документов. Модели представляют собой объекты, собранные конструктором схемы. Экземпляры этих моделей представляют собой документы, которые могут быть сохранены и извлечены из нашей базы данных.

- создаём схему для коллекции с использованием типов
- создаём модель, пробуем сохранить в коллекции
- проверям что всё сделали правильно и пробуем получить сохранённый документ из бд
- имплементим в логику приложения нашу схему и запросы на получение документов из коллекции
- кастомные методы, кастомные квери - ??? 

## Валидация
- имплементим валидацию
